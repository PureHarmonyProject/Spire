package spire_comparison_example

import spire_web_http.*
import spire_web_hosting.*
import spire_web_routing.*
import spire_extensions_injection.*
import spire_web_mvc.*
import std.reflect.*
import std.time.*

main() {
    let startTime = DateTime.now()
    let builder = WebHost.createBuilder()
    
    // 注册服务
    builder.services.addSingleton<IUserService, UserService>()
    
    // 添加 MVC
    builder.services.addControllers()
        .addApplicationPart("MyApp", [TypeInfo.of<UserController>()])

    let host = builder.build()

    host.useEndpoints { endpoints =>
        endpoints.mapControllers()
    }

    let endTime = DateTime.now()
    let durationMs = (endTime - startTime).toMilliseconds()
    
    // 打印 Spire ASCII 艺术标志
    println("""
    ╔══════════════════════════════════════════════════╗
    ║                                                  ║
    ║   ███████╗  ██████╗   ██╗   ██████╗    ███████╗  ║
    ║   ██╔════╝  ██╔══██╗  ██║   ██╔══██╗   ██╔════╝  ║
    ║   ███████╗  ██████╔╝  ██║   ██████╔╝   █████╗    ║
    ║   ╚════██║  ██╔═══╝   ██║   ██╔══██╗   ██╔══╝    ║
    ║   ███████║  ██║       ██║   ██║  ██║   ███████╗  ║
    ║   ╚══════╝  ╚═╝       ╚═╝   ╚═╝  ╚═╝   ╚══════╝  ║
    ║                  Spire Web V1.0.0                ║
    ╚══════════════════════════════════════════════════╝                               
    """)
    
    println("🚀 Spire Web MVC Application")
    println("   Version: 1.0.0")
    println("   Started in ${durationMs}ms")
    println("   Server: http://localhost:5000")
    println("")

    host.run()
}